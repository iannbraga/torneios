<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>Gerador de Torneios de Xadrez</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Bootstrap 5 -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />

  <!-- Vue 3 -->
  <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
</head>
<body class="bg-light">

<div id="app" class="container py-4">
  <h1 class="mb-4">Gerador de Torneios de Xadrez</h1>

  <!-- Formulário -->
  <div class="card mb-4">
    <div class="card-body">
      <div class="mb-3">
        <label class="form-label">Nome do Torneio</label>
        <input v-model="tournament.name" type="text" class="form-control" />
      </div>

      <div class="mb-3">
        <label class="form-label">Participantes (1 por linha)</label>
        <textarea v-model="participantsText" class="form-control" rows="5"></textarea>
      </div>

      <div class="mb-3">
        <label class="form-label">Tempo de Jogo</label>
        <select v-model="tournament.timeControl" class="form-select">
          <option>Clássicas</option>
          <option>Rápidas</option>
          <option>Blitz</option>
        </select>
      </div>

      <div class="mb-3">
        <label class="form-label">Número de Rodadas</label>
        <input v-model.number="tournament.rounds" type="number" min="1" class="form-control" />
      </div>

      <button @click="generateTournament" class="btn btn-primary">
        Gerar Chaveamento
      </button>
    </div>
  </div>

  <!-- Resultado -->
  <div v-if="pairings.length" class="card">
    <div class="card-body">
      <h4>{{ tournament.name }}</h4>
      <p><strong>Tempo:</strong> {{ tournament.timeControl }}</p>

      <div v-for="(round, index) in pairings" :key="index" class="mb-3">
        <h5>Rodada {{ index + 1 }}</h5>
        <ul class="list-group">
          <li v-for="(match, i) in round" :key="i" class="list-group-item">
            {{ match.white }} vs {{ match.black }}
          </li>
        </ul>
      </div>
    </div>
  </div>
</div>

<script>
const { createApp } = Vue;

createApp({
  data() {
    return {
      tournament: {
        name: '',
        timeControl: 'Rápidas',
        rounds: 1
      },
      participantsText: '',
      pairings: []
    }
  },
  methods: {
    generateTournament() {
      const players = this.participantsText
        .split('\n')
        .map(p => p.trim())
        .filter(p => p);

      this.pairings = [];

      for (let r = 0; r < this.tournament.rounds; r++) {
        const shuffled = [...players].sort(() => Math.random() - 0.5);
        const round = [];

        for (let i = 0; i < shuffled.length; i += 2) {
          if (shuffled[i + 1]) {
            round.push({
              white: shuffled[i],
              black: shuffled[i + 1]
            });
          }
        }
        this.pairings.push(round);
      }
    }
  }
}).mount('#app');
</script>

</body>
</html>
